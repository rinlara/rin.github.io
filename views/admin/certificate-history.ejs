<!-- views/admin/certificate-history.ejs -->

<% 
// ตรวจสอบว่ามีข้อมูลหรือไม่
const stats = locals.stats || { pending_count: 0, approved_count: 0, rejected_count: 0, total_requests: 0, total_certificates: 0 };
const allRequests = locals.allRequests || [];
const user = locals.user || {};
const filterStatus = locals.filterStatus || 'approved'; // ค่าเริ่มต้นแสดงเฉพาะที่อนุมัติแล้ว
%>

<% if (locals.error) { %>
  <div class="alert alert-danger alert-dismissible fade show mb-4" role="alert">
    <i class="fas fa-exclamation-triangle me-2"></i>
    <%= locals.error %>
    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
  </div>
<% } %>

<% if (locals.success) { %>
  <div class="alert alert-success alert-dismissible fade show mb-4" role="alert">
    <i class="fas fa-check-circle me-2"></i>
    <%= locals.success %>
    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
  </div>
<% } %>

<!-- Header Section -->
<div class="card shadow-lg mb-4 border-0">
  <div class="card-header bg-gradient-primary text-white py-4">
    <div class="d-flex justify-content-between align-items-center">
      <h3 class="mb-0 fw-bold">
        <i class="fas fa-history me-2"></i>
        <strong>ประวัติการขอหมายเลขเกียรติบัตรทั้งหมด</strong>
      </h3>
      <div class="d-flex gap-2">
        <span class="badge bg-light text-dark">
          <i class="fas fa-user me-1"></i>
          <%= user.full_name %>
        </span>
        <span class="badge bg-warning text-dark">
          <i class="fas fa-clock me-1"></i>
          <%= new Date().toLocaleDateString('th-TH', { year: 'numeric', month: 'long', day: 'numeric' }) %>
        </span>
      </div>
    </div>
  </div>
</div>

<!-- Statistics Cards -->
<div class="row mb-4">
  <div class="col-md-3">
    <div class="card bg-gradient-warning text-dark shadow-sm border-0 h-100">
      <div class="card-body">
        <div class="d-flex justify-content-between align-items-center">
          <div>
            <h6 class="mb-0 fw-bold"><i class="fas fa-clock me-2"></i>รอตรวจสอบ</h6>
            <h3 class="mb-0 fw-bold display-6"><%= stats.pending_count || 0 %></h3>
            <small class="text-muted">รายการคำขอ</small>
          </div>
          <div class="bg-white p-3 rounded-circle">
            <i class="fas fa-hourglass-half fa-2x text-warning"></i>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <div class="col-md-3">
    <div class="card bg-gradient-success text-white shadow-sm border-0 h-100">
      <div class="card-body">
        <div class="d-flex justify-content-between align-items-center">
          <div>
            <h6 class="mb-0 fw-bold"><i class="fas fa-check-circle me-2"></i>อนุมัติแล้ว</h6>
            <h3 class="mb-0 fw-bold display-6"><%= stats.approved_count || 0 %></h3>
            <small class="text-white-50">รายการคำขอ</small>
          </div>
          <div class="bg-white p-3 rounded-circle">
            <i class="fas fa-check-double fa-2x text-success"></i>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <div class="col-md-3">
    <div class="card bg-gradient-danger text-white shadow-sm border-0 h-100">
      <div class="card-body">
        <div class="d-flex justify-content-between align-items-center">
          <div>
            <h6 class="mb-0 fw-bold"><i class="fas fa-times-circle me-2"></i>ปฏิเสธ</h6>
            <h3 class="mb-0 fw-bold display-6"><%= stats.rejected_count || 0 %></h3>
            <small class="text-white-50">รายการคำขอ</small>
          </div>
          <div class="bg-white p-3 rounded-circle">
            <i class="fas fa-ban fa-2x text-danger"></i>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <div class="col-md-3">
    <div class="card bg-gradient-primary text-white shadow-sm border-0 h-100">
      <div class="card-body">
        <div class="d-flex justify-content-between align-items-center">
          <div>
            <h6 class="mb-0 fw-bold"><i class="fas fa-database me-2"></i>ทั้งหมด</h6>
            <h3 class="mb-0 fw-bold display-6"><%= stats.total_requests || 0 %></h3>
            <small class="text-white-50">รายการคำขอ</small>
          </div>
          <div class="bg-white p-3 rounded-circle">
            <i class="fas fa-award fa-2x text-primary"></i>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Navigation Tabs -->
<div class="card shadow-lg mb-4 border-0">
  <div class="card-header bg-white py-3">
    <ul class="nav nav-tabs card-header-tabs border-bottom-0">
      <li class="nav-item">
        <a class="nav-link fw-bold text-muted" href="/admin/certificate-requests">
          <i class="fas fa-clock me-1"></i>รอการตรวจสอบ
        </a>
      </li>
      <li class="nav-item">
        <a class="nav-link active fw-bold text-official-primary" href="/admin/certificate-history">
          <i class="fas fa-history me-1"></i>ประวัติการขอทั้งหมด
        </a>
      </li>
      <li class="nav-item ms-auto">
        <a href="/admin/dashboard" class="btn btn-official-outline btn-sm">
          <i class="fas fa-arrow-left me-1"></i>กลับหน้าหลัก
        </a>
      </li>
    </ul>
  </div>
</div>

<!-- Filter Section -->
<div class="card shadow-lg mb-4 border-0">
  <div class="card-body">
    <div class="row align-items-end">
      <div class="col-md-3 mb-3">
        <label class="form-label fw-bold text-official-primary mb-1">สถานะ</label>
        <select id="filterStatus" class="form-select form-select-lg">
          <option value="all" <%= filterStatus === 'all' ? 'selected' : '' %>>ทั้งหมด</option>
          <option value="pending" <%= filterStatus === 'pending' ? 'selected' : '' %>>รอตรวจสอบ</option>
          <option value="approved" <%= filterStatus === 'approved' ? 'selected' : '' %>>อนุมัติแล้ว</option>
          <option value="rejected" <%= filterStatus === 'rejected' ? 'selected' : '' %>>ปฏิเสธ</option>
        </select>
      </div>
      <div class="col-md-3 mb-3">
        <label class="form-label fw-bold text-official-primary mb-1">ปี พ.ศ.</label>
        <select id="filterYear" class="form-select form-select-lg">
          <option value="all">ทั้งหมด</option>
          <% for (let year = 2565; year <= (new Date().getFullYear() + 543); year++) { %>
            <option value="<%= year %>"><%= year %></option>
          <% } %>
        </select>
      </div>
      <div class="col-md-4 mb-3">
        <label class="form-label fw-bold text-official-primary mb-1">ค้นหาโครงการ/ผู้ขอ</label>
        <input type="text" id="filterSearch" class="form-control form-control-lg" placeholder="พิมพ์ชื่อโครงการหรือผู้ขอ...">
      </div>
      <div class="col-md-2 mb-3">
        <button id="btnFilter" class="btn btn-official-primary w-100 h-100">
          <i class="fas fa-search me-1"></i> ค้นหา
        </button>
      </div>
    </div>
  </div>
</div>

<!-- History Table -->
<% if (allRequests.length > 0) { %>
  <div class="card shadow-lg border-0">
    <div class="card-header bg-gradient-primary text-white py-4">
      <div class="d-flex justify-content-between align-items-center">
        <h4 class="mb-0 fw-bold">
          <i class="fas fa-list-check me-2"></i>
          ประวัติการขอหมายเลขเกียรติบัตรทั้งหมด (<%= allRequests.length %> รายการ)
        </h4>
        <button id="btnExport" class="btn btn-light btn-sm">
          <i class="fas fa-file-excel me-1"></i> ส่งออก Excel
        </button>
      </div>
    </div>
    <div class="card-body p-0">
      <div class="table-responsive">
        <table class="table table-hover table-striped mb-0" id="historyTable">
          <thead class="table-light">
            <tr>
              <th class="ps-4" width="10%">วันที่ขอ</th>
              <th width="15%">ผู้ขอ</th>
              <th width="25%">โครงการ/กิจกรรม</th>
              <th class="text-center" width="8%">จำนวน</th>
              <th class="text-center" width="10%">วันที่จัด</th>
              <th class="text-center" width="12%">สถานะ</th>
              <th class="text-center" width="10%">อนุมัติโดย</th>
              <th class="text-center" width="10%">จัดการ</th>
            </tr>
          </thead>
          <tbody>
            <% allRequests.forEach(request => { 
              // แปลงวันที่ให้ถูกต้อง
              const createdAt = new Date(request.created_at);
              const eventDate = new Date(request.event_date);
              const thaiYear = eventDate.getFullYear() + 543;
              const isApproved = request.status === 'approved';
            %>
              <tr class="align-middle" data-status="<%= request.status %>" data-year="<%= thaiYear %>">
                <td class="ps-4">
                  <div class="fw-bold">
                    <i class="fas fa-calendar me-1 text-muted"></i>
                    <%= createdAt.toLocaleDateString('th-TH', { year: 'numeric', month: 'long', day: 'numeric' }) %>
                  </div>
                  <small class="text-muted">
                    <i class="fas fa-clock me-1"></i>
                    <%= createdAt.toLocaleTimeString('th-TH', { hour: '2-digit', minute: '2-digit' }) %>
                  </small>
                </td>
                <td>
                  <div class="fw-bold text-primary"><%= request.full_name || request.requester_name || '-' %></div>
                  <small class="text-muted"><%= request.school_name || '-' %></small>
                </td>
                <td>
                  <div class="fw-bold"><%= request.event_name || '-' %></div>
                  <small class="text-muted">
                    <i class="fas fa-user me-1"></i>
                    <%= request.signature_owner || '-' %>
                  </small>
                </td>
                <td class="text-center">
                  <span class="badge bg-primary fs-6">
                    <i class="fas fa-certificate me-1"></i>
                    <%= request.certificate_count ? parseInt(request.certificate_count).toLocaleString() : '0' %>
                  </span>
                </td>
                <td class="text-center">
                  <span class="badge bg-info text-dark">
                    <i class="fas fa-calendar-check me-1"></i>
                    <%= eventDate.toLocaleDateString('th-TH', { year: 'numeric', month: 'long', day: 'numeric' }) %>
                  </span>
                </td>
                <td class="text-center">
                  <% if (request.status === 'pending') { %>
                    <span class="badge bg-warning text-dark">
                      <i class="fas fa-clock me-1"></i> รอตรวจสอบ
                    </span>
                  <% } else if (request.status === 'approved') { %>
                    <span class="badge bg-success">
                      <i class="fas fa-check-circle me-1"></i> อนุมัติแล้ว
                    </span>
                  <% } else if (request.status === 'rejected') { %>
                    <span class="badge bg-danger">
                      <i class="fas fa-times-circle me-1"></i> ปฏิเสธ
                    </span>
                  <% } else { %>
                    <span class="badge bg-secondary">
                      <%= request.status %>
                    </span>
                  <% } %>
                </td>
                <td class="text-center">
                  <% if (request.approver_name) { %>
                    <small class="fw-bold text-primary"><%= request.approver_name %></small><br>
                    <small class="text-muted">
                      <%= request.approved_at ? new Date(request.approved_at).toLocaleDateString('th-TH') : '-' %>
                    </small>
                    <% if (request.certificate_number) { %>
                      <br>
                      <small class="badge bg-success mt-1">
                        <i class="fas fa-certificate me-1"></i>
                        <%= request.certificate_number %>
                      </small>
                    <% } %>
                  <% } else { %>
                    <span class="text-muted">-</span>
                  <% } %>
                </td>
                <td class="text-center">
                  <div class="d-flex gap-2 justify-content-center">
                    <!-- ปุ่มดูรายละเอียด -->
                    <button class="btn btn-sm btn-info view-detail-btn" 
                            data-request-id="<%= request.id %>"
                            data-certificate="<%= request.certificate_number || '' %>"
                            data-approver="<%= request.approver_name || '' %>"
                            data-approved-date="<%= request.approved_at || '' %>"
                            title="ดูรายละเอียด">
                      <i class="fas fa-eye"></i>
                    </button>
                    
                    <!-- ปุ่มพิมพ์เกียรติบัตร (เฉพาะที่อนุมัติแล้ว) -->
                    <% if (isApproved && request.certificate_number) { %>
                      <a href="/admin/certificates/<%= request.id %>" class="btn btn-sm btn-primary" 
                         title="พิมพ์เกียรติบัตร">
                        <i class="fas fa-print"></i>
                      </a>
                    <% } %>
                  </div>
                </td>
              </tr>
            <% }); %>
          </tbody>
        </table>
      </div>
    </div>
  </div>
<% } else { %>
  <!-- Empty State -->
  <div class="card shadow-lg border-0">
    <div class="card-body text-center py-5">
      <div class="mb-4">
        <i class="fas fa-history fa-5x text-muted opacity-50"></i>
      </div>
      <h4 class="text-muted mb-3">
        <i class="fas fa-inbox me-2"></i>
        ไม่มีประวัติการขอหมายเลขเกียรติบัตร
      </h4>
      <p class="text-muted mb-4">
        <i class="fas fa-info-circle me-1"></i>
        ยังไม่มีการขอหมายเลขเกียรติบัตรในระบบ
      </p>
      <a href="/admin/certificate-requests" class="btn btn-official-primary btn-lg px-5 py-3 shadow">
        <i class="fas fa-arrow-left me-2"></i>
        <strong>กลับหน้าจัดการคำขอ</strong>
      </a>
    </div>
  </div>
<% } %>

<!-- Modal ดูรายละเอียดคำขอ -->
<div class="modal fade" id="detailModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header bg-gradient-primary text-white">
        <h5 class="modal-title">
          <i class="fas fa-info-circle me-2"></i>
          รายละเอียดคำขอหมายเลขเกียรติบัตร
        </h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body" id="modalContent">
        <!-- Content will be loaded here -->
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
          <i class="fas fa-times me-1"></i> ปิด
        </button>
      </div>
    </div>
  </div>
</div>

<!-- Footer Note -->
<div class="alert alert-official-light mt-4 mb-0 border-0 rounded-3">
  <div class="d-flex align-items-start">
    <i class="fas fa-shield-alt fa-2x text-official-primary me-3 mt-1"></i>
    <div>
      <h6 class="fw-bold mb-1">ประกาศสำคัญ</h6>
      <p class="mb-1 small">ข้อมูลประวัติการขอหมายเลขเกียรติบัตรจะถูกเก็บรักษาไว้เป็นระยะเวลา 5 ปี นับจากวันที่สร้าง</p>
      <p class="mb-1 small">สามารถส่งออกข้อมูลเป็นไฟล์ Excel สำหรับการจัดเก็บหรือรายงานได้</p>
      <p class="mb-0 small text-muted">สงวนลิขสิทธิ์ © 2567 สำนักงานเขตพื้นที่การศึกษาประถมศึกษาขอนแก่น เขต 2</p>
    </div>
  </div>
</div>

<!-- Scripts -->
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

<script>
  // ฟังก์ชันดูรายละเอียดคำขอ
  function viewRequestDetail(requestId, certificateNumber, approverName, approvedDate) {
    fetch(`/admin/certificate-requests/${requestId}/detail`)
      .then(response => response.text())
      .then(html => {
        let content = html;
        
        // เพิ่มข้อมูลเกียรติบัตรที่สร้าง (ถ้ามี)
        if (certificateNumber) {
          const cert = `
            <div class="alert alert-success alert-dismissible fade show" role="alert">
              <div class="d-flex align-items-start">
                <i class="fas fa-certificate fa-2x text-success me-3 mt-1"></i>
                <div>
                  <h6 class="alert-heading fw-bold">หมายเลขเกียรติบัตรที่สร้าง</h6>
                  <p class="mb-0"><strong class="fs-5">${certificateNumber}</strong></p>
                  <small class="text-muted mt-1 d-block">
                    <i class="fas fa-check-circle me-1"></i>
                    อนุมัติโดย: ${approverName || '-'}
                  </small>
                  <small class="text-muted d-block">
                    <i class="fas fa-calendar me-1"></i>
                    วันที่อนุมัติ: ${approvedDate ? new Date(approvedDate).toLocaleDateString('th-TH', { year: 'numeric', month: 'long', day: 'numeric' }) : '-'}
                  </small>
                </div>
              </div>
            </div>
          `;
          content = cert + content;
        }
        
        document.getElementById('modalContent').innerHTML = content;
        const modal = new bootstrap.Modal(document.getElementById('detailModal'));
        modal.show();
      })
      .catch(error => {
        Swal.fire({
          icon: 'error',
          title: '<strong>เกิดข้อผิดพลาด</strong>',
          text: 'ไม่สามารถโหลดรายละเอียดคำขอได้: ' + error.message
        });
      });
  }

  // ฟังก์ชันกรองข้อมูล
  function filterTable() {
    const status = document.getElementById('filterStatus').value;
    const year = document.getElementById('filterYear').value;
    const search = document.getElementById('filterSearch').value.toLowerCase();
    const rows = document.querySelectorAll('#historyTable tbody tr');
    
    let visibleCount = 0;
    
    rows.forEach(row => {
      const rowStatus = row.getAttribute('data-status');
      const rowYear = row.getAttribute('data-year');
      const projectName = row.children[2].textContent.toLowerCase();
      const requesterName = row.children[1].textContent.toLowerCase();
      
      const statusMatch = status === 'all' || rowStatus === status;
      const yearMatch = year === 'all' || rowYear === year;
      const searchMatch = search === '' || projectName.includes(search) || requesterName.includes(search);
      
      if (statusMatch && yearMatch && searchMatch) {
        row.style.display = '';
        visibleCount++;
      } else {
        row.style.display = 'none';
      }
    });
    
    // อัปเดตจำนวนรายการที่แสดง
    const headerTitle = document.querySelector('.card-header.bg-gradient-primary h4');
    if (headerTitle) {
      const total = rows.length;
      headerTitle.innerHTML = `<i class="fas fa-list-check me-2"></i>ประวัติการขอหมายเลขเกียรติบัตรทั้งหมด (${visibleCount} จาก ${total} รายการ)`;
    }
  }

  // ฟังก์ชันส่งออก Excel
  function exportToExcel() {
    const table = document.getElementById('historyTable');
    const visibleRows = table.querySelectorAll('tbody tr:not([style*="display: none"])');
    
    if (visibleRows.length === 0) {
      Swal.fire({
        icon: 'warning',
        title: '<strong>ไม่มีข้อมูล</strong>',
        text: 'ไม่มีข้อมูลที่จะส่งออก'
      });
      return;
    }
    
    // สร้างตารางชั่วคราวสำหรับส่งออก
    const tempTable = document.createElement('table');
    const thead = table.querySelector('thead').cloneNode(true);
    const tbody = document.createElement('tbody');
    
    visibleRows.forEach(row => {
      tbody.appendChild(row.cloneNode(true));
    });
    
    tempTable.appendChild(thead);
    tempTable.appendChild(tbody);
    
    const wb = XLSX.utils.table_to_book(tempTable, { sheet: "ประวัติการขอหมายเลขเกียรติบัตร" });
    
    // กำหนดชื่อไฟล์
    const date = new Date();
    const thaiYear = date.getFullYear() + 543;
    const month = String(date.getMonth() + 1).padStart(2, '0');
    const day = String(date.getDate()).padStart(2, '0');
    
    XLSX.writeFile(wb, `ประวัติการขอหมายเลขเกียรติบัตร_${day}${month}${thaiYear}.xlsx`);
    
    Swal.fire({
      icon: 'success',
      title: '<strong>ส่งออกสำเร็จ!</strong>',
      text: 'ไฟล์ Excel ถูกดาวน์โหลดเรียบร้อยแล้ว'
    });
  }

  // Event Listeners
  document.addEventListener('DOMContentLoaded', function() {
    // ปุ่มดูรายละเอียด
    document.querySelectorAll('.view-detail-btn').forEach(button => {
      button.addEventListener('click', (e) => {
        e.preventDefault();
        const requestId = button.getAttribute('data-request-id');
        const certificateNumber = button.getAttribute('data-certificate');
        const approverName = button.getAttribute('data-approver');
        const approvedDate = button.getAttribute('data-approved-date');
        viewRequestDetail(requestId, certificateNumber, approverName, approvedDate);
      });
    });

    // ปุ่มกรอง
    document.getElementById('btnFilter').addEventListener('click', filterTable);
    
    // กรองเมื่อเปลี่ยนค่าใน dropdown
    document.getElementById('filterStatus').addEventListener('change', filterTable);
    document.getElementById('filterYear').addEventListener('change', filterTable);
    
    // กรองเมื่อพิมพ์ในช่องค้นหา (พร้อมดีเลย์)
    let searchTimeout;
    document.getElementById('filterSearch').addEventListener('input', function(e) {
      clearTimeout(searchTimeout);
      searchTimeout = setTimeout(filterTable, 300);
    });
    
    // ปุ่มส่งออก Excel
    const exportBtn = document.getElementById('btnExport');
    if (exportBtn) {
      exportBtn.addEventListener('click', exportToExcel);
    }
    
    // กรองข้อมูลเริ่มต้น
    filterTable();
  });
</script>

<style>
  :root {
    --official-blue: #0d4a6b;
    --official-dark-blue: #0a3a56;
    --official-light-blue: #1e88e5;
    --official-gold: #d4af37;
    --official-border: #dee2e6;
  }
  
  .bg-gradient-primary {
    background: linear-gradient(135deg, var(--official-dark-blue) 0%, var(--official-blue) 100%);
  }
  
  .bg-gradient-success {
    background: linear-gradient(135deg, #166534 0%, #22c55e 100%);
  }
  
  .bg-gradient-warning {
    background: linear-gradient(135deg, #b45309 0%, #f59e0b 100%);
  }
  
  .bg-gradient-danger {
    background: linear-gradient(135deg, #b91c1c 0%, #ef4444 100%);
  }
  
  .shadow-lg {
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15) !important;
  }
  
  .card {
    border-radius: 12px !important;
    transition: transform 0.3s ease;
    border: 1px solid var(--official-border) !important;
  }
  
  .card:hover {
    transform: translateY(-5px);
  }
  
  .table-hover tbody tr:hover {
    background-color: #f8f9fa;
  }
  
  .badge {
    padding: 0.45em 0.85em !important;
    font-weight: 500;
    border-radius: 4px;
  }
  
  .btn {
    transition: all 0.3s ease;
    border-radius: 6px;
    font-weight: 500;
    padding: 0.4rem 0.8rem;
  }
  
  .btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
  }
  
  .btn-success {
    background: linear-gradient(135deg, #166534 0%, #15803d 100%);
    border: none;
    color: white;
  }
  
  .btn-success:hover {
    background: linear-gradient(135deg, #15803d 0%, #10b981 100%);
    box-shadow: 0 5px 15px rgba(22, 101, 52, 0.4);
  }
  
  .btn-danger {
    background: linear-gradient(135deg, #b91c1c 0%, #dc2626 100%);
    border: none;
    color: white;
    min-width: 40px;
  }
  
  .btn-danger:hover {
    background: linear-gradient(135deg, #dc2626 0%, #ef4444 100%);
    box-shadow: 0 5px 15px rgba(185, 28, 28, 0.4);
  }
  
  .btn-info {
    background: linear-gradient(135deg, #0891b2 0%, #0e7490 100%);
    border: none;
    color: white;
    min-width: 40px;
  }
  
  .btn-info:hover {
    background: linear-gradient(135deg, #0e7490 0%, #0891b2 100%);
    box-shadow: 0 5px 15px rgba(8, 145, 178, 0.4);
  }
  
  .btn-primary {
    background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%);
    border: none;
    color: white;
    min-width: 40px;
  }
  
  .btn-primary:hover {
    background: linear-gradient(135deg, #3b82f6 0%, #60a5fa 100%);
    box-shadow: 0 5px 15px rgba(30, 64, 175, 0.4);
  }
  
  .btn-official-primary {
    background-color: var(--official-blue);
    border-color: var(--official-blue);
    color: white;
    font-weight: 500;
  }
  
  .btn-official-primary:hover {
    background-color: var(--official-dark-blue);
    border-color: var(--official-dark-blue);
    transform: translateY(-1px);
    box-shadow: 0 4px 8px rgba(13, 74, 107, 0.3);
  }
  
  .btn-official-outline {
    background-color: white;
    border: 2px solid var(--official-blue);
    color: var(--official-blue);
    font-weight: 500;
  }
  
  .btn-official-outline:hover {
    background-color: var(--official-blue);
    color: white;
  }
  
  .nav-tabs .nav-link {
    border: none;
    padding: 0.75rem 1.5rem;
    border-radius: 0;
    margin-right: 0.5rem;
    font-weight: 500;
  }
  
  .nav-tabs .nav-link.active {
    color: var(--official-blue);
    border-bottom: 3px solid var(--official-blue);
    background-color: rgba(13, 74, 107, 0.05);
  }
  
  .nav-tabs .nav-link:hover {
    color: var(--official-blue);
  }
  
  .alert-official-light {
    background-color: #f8f9fa;
    border-left: 4px solid var(--official-blue);
  }
  
  .display-6 {
    font-size: 2.5rem;
  }
  
  .modal-content {
    border-radius: 12px !important;
    border: none;
  }
  
  .modal-header {
    border-radius: 12px 12px 0 0 !important;
  }
  
  @media (max-width: 768px) {
    .display-6 {
      font-size: 2rem;
    }
    
    .nav-tabs .nav-link {
      padding: 0.75rem 1rem;
      font-size: 0.9rem;
    }
    
    .btn {
      padding: 0.4rem 0.6rem;
      font-size: 0.85rem;
    }
    
    .table-responsive {
      font-size: 0.9rem;
    }
  }
</style>